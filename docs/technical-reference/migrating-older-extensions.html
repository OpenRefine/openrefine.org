<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-technical-reference/migrating-older-extensions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Migrating older extensions | OpenRefine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openrefine.org/docs/technical-reference/migrating-older-extensions"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating older extensions | OpenRefine"><meta data-rh="true" name="description" content="Migrating from Ant to Maven"><meta data-rh="true" property="og:description" content="Migrating from Ant to Maven"><link data-rh="true" rel="icon" href="/img/openrefine_logo.svg"><link data-rh="true" rel="canonical" href="https://openrefine.org/docs/technical-reference/migrating-older-extensions"><link data-rh="true" rel="alternate" href="https://openrefine.org/docs/technical-reference/migrating-older-extensions" hreflang="en"><link data-rh="true" rel="alternate" href="https://openrefine.org/docs/technical-reference/migrating-older-extensions" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RXJKLJKJU2-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenRefine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenRefine Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="OpenRefine" href="/opensearch.xml">


<script src="/js/fix-location.js"></script><link rel="stylesheet" href="/assets/css/styles.a1181bf6.css">
<script src="/assets/js/runtime~main.3b2d2040.js" defer="defer"></script>
<script src="/assets/js/main.c6558953.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_hUDU" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="themedComponent_vVmS themedComponent--light_NniB"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="themedComponent_vVmS themedComponent--dark_yJur"></div><b class="navbar__title text--truncate">OpenRefine</b></a><a class="navbar__item navbar__link" href="/download">Download</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/donate">Donate</a><a href="https://github.com/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_CSJf colorModeToggle_Cgdy"><button class="clean-btn toggleButton_jrrp toggleButtonDisabled_v9ww" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_hPNs"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Pxog"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_WQyT"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_tDGm"><div class="docsWrapper_kJ9P"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_hEO2" type="button"></button><div class="docRoot_q0n7"><aside class="theme-doc-sidebar-container docSidebarContainer_HBrN"><div class="sidebarViewport_rCxN"><div class="sidebar_hGra"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Uy8J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs">User Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/technical-reference/contributing">Contributing to OpenRefine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/contributing">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/why-get-involved">Why get involved</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/github">Communicating via GitHub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/technical-reference/code-contributions">Contributing as a developer</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/code-contributions">Code contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/translating-ui">Translate OpenRefine&#x27;s interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/build-test-run">How to build, test and run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/functional-tests">Functional tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/architecture-before-4">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/technical-reference/writing-extensions">Extensions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/writing-extensions">Writing extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/technical-reference/migrating-older-extensions">Migrating older extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/wikibase/architecture">Wikibase extension</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/maintainer-guidelines">Maintaining OpenRefine</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/introduction">Contributing as a designer</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/documentation-contributions">Documentation contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/development-roadmap">Development roadmap</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_msDC"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VluO"><div class="docItemContainer_z4Sv"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_WV5T" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xTv0"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributing to OpenRefine</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributing as a developer</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Extensions</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating older extensions</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_d09M theme-doc-toc-mobile tocMobile__k1e"><button type="button" class="clean-btn tocCollapsibleButton_cV_m">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating older extensions</h1></header><h2 class="anchor anchorWithStickyNavbar__YFU" id="migrating-from-ant-to-maven">Migrating from Ant to Maven<a href="#migrating-from-ant-to-maven" class="hash-link" aria-label="Direct link to Migrating from Ant to Maven" title="Direct link to Migrating from Ant to Maven">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="why-are-we-doing-this-change">Why are we doing this change?<a href="#why-are-we-doing-this-change" class="hash-link" aria-label="Direct link to Why are we doing this change?" title="Direct link to Why are we doing this change?">​</a></h3>
<p>Ant is a fairly old (antique?) build system that does not incorporate any dependency management.
By migrating to Maven we are making it easier for developers to extend OpenRefine with new libraries, and  stop having to ship dozens of .jar files in the repository. Using the Maven repository also encourages developers to add dependencies to released versions of libraries instead of custom snapshots that are hard to update.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="when-was-this-change-made">When was this change made?<a href="#when-was-this-change-made" class="hash-link" aria-label="Direct link to When was this change made?" title="Direct link to When was this change made?">​</a></h3>
<p>The migration was done between 3.0 and 3.1-beta with this commit:
<a href="https://github.com/OpenRefine/OpenRefine/commit/47323a9e750a3bc9d43af606006b5eb20ca397b8" target="_blank" rel="noopener noreferrer">https://github.com/OpenRefine/OpenRefine/commit/47323a9e750a3bc9d43af606006b5eb20ca397b8</a></p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="how-to-migrate-an-extension">How to migrate an extension<a href="#how-to-migrate-an-extension" class="hash-link" aria-label="Direct link to How to migrate an extension" title="Direct link to How to migrate an extension">​</a></h3>
<p>You will need to write a <code>pom.xml</code> in the root folder of your extension to configure the compilation process with Maven. Sample <code>pom.xml</code> files for extensions can be found in the extensions that are shipped with OpenRefine (<code>gdata</code>, <code>database</code>, <code>jython</code>, <code>pc-axis</code> and <code>wikidata</code>). A sample extension (<code>sample</code>) is also provided, with a minimal build file.</p>
<p>For any library that your extension depends on, you should try to find a matching artifact in the Maven Central repository. If you can find such an artifact, delete the <code>.jar</code> file from your extension and add the dependency in your <code>pom.xml</code> file. If you cannot find such an artifact, it is still possible to incorporate your own <code>.jar</code> file using <code>maven-install-plugin</code> that you can configure in your <code>pom.xml</code> file as follows:</p>
<div class="codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-text codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;version&gt;2.5.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;executions&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;execution&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;id&gt;install-wdtk-datamodel&lt;/id&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;phase&gt;process-resources&lt;/phase&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;file&gt;${basedir}/lib/my-proprietary-library.jar&lt;/file&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;repositoryLayout&gt;default&lt;/repositoryLayout&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;groupId&gt;com.my.company&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;artifactId&gt;my-library&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;version&gt;0.5.3-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;generatePom&gt;true&lt;/generatePom&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;goals&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;goal&gt;install-file&lt;/goal&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &lt;/goals&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;/execution&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;!-- if you need to add more than one jar, add more execution blocks here --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/executions&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/plugin&gt;</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And add the dependency to the <code>&lt;dependencies&gt;</code> section as usual:</p>
<dependency><groupid>com.my.company</groupid><artifactid>my-library</artifactid><version>0.5.3-SNAPSHOT</version></dependency>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="migrating-to-wikimedias-i18n-jquery-plugin">Migrating to Wikimedia&#x27;s i18n jQuery plugin<a href="#migrating-to-wikimedias-i18n-jquery-plugin" class="hash-link" aria-label="Direct link to Migrating to Wikimedia&#x27;s i18n jQuery plugin" title="Direct link to Migrating to Wikimedia&#x27;s i18n jQuery plugin">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="why-are-we-doing-this-change-1">Why are we doing this change?<a href="#why-are-we-doing-this-change-1" class="hash-link" aria-label="Direct link to Why are we doing this change?" title="Direct link to Why are we doing this change?">​</a></h3>
<p>This adds various important localization features, such as the ability to handle plurals or interpolation. This also restores the language fallback (displaying strings in English if they are not available in the target language) which did not work with the previous set up.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="when-was-the-migration-made">When was the migration made?<a href="#when-was-the-migration-made" class="hash-link" aria-label="Direct link to When was the migration made?" title="Direct link to When was the migration made?">​</a></h3>
<p>The migration was made between 3.1-beta and 3.1, with this commit: <a href="https://github.com/OpenRefine/OpenRefine/commit/22322bd0272e99869ab8381b1f28696cc7a26721" target="_blank" rel="noopener noreferrer">https://github.com/OpenRefine/OpenRefine/commit/22322bd0272e99869ab8381b1f28696cc7a26721</a></p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="how-to-migrate-an-extension-1">How to migrate an extension<a href="#how-to-migrate-an-extension-1" class="hash-link" aria-label="Direct link to How to migrate an extension" title="Direct link to How to migrate an extension">​</a></h3>
<p>You will need to update your translation files, merging nested objets in one global object, concatenating keys. You can do this by running the following Python script on all your JSON translation files:</p>
<p>import json
import sys</p>
<p>with open(sys.argv[1], &#x27;r&#x27;) as f:
j = json.loads(f.read())</p>
<p>result = <!-- -->
def translate(obj, path):
res = <!-- -->
if type(obj) == str:
result[&#x27;/&#x27;.join(path)] = obj
else:
for k, v in obj.items():
new_path = path + [k]
translate(v, new_path)</p>
<p>translate(j, [])</p>
<p>with open(sys.argv[1], &#x27;w&#x27;) as f:
f.write(json.dumps(result, ensure_ascii=False, indent=4))</p>
<p>Then your javascript files which retrieve the translated strings should be updated: <code>$.i18n._(&#x27;core-dialogs&#x27;)[&#x27;cancel&#x27;]</code> becomes <code>$.i18n(&#x27;core-dialogs/cancel&#x27;)</code>. You can do this with the following <code>sed</code> script:</p>
<p>sed -i &quot;s/$.i18n.<em>([&#x27;&quot;]([A-Za-z0-9/</em>\-]<em>)[&#x27;&quot;])[[&#x27;&quot;]([A-Za-z0-9-_]</em>)[&quot;&#x27;]]/$.i18n(&#x27;\1/\2&#x27;)/g&quot; my_javascript_file.js</p>
<p>You can then chase down the places where you are concatenating translated strings, and replace that with more flexible patterns using <a href="https://github.com/wikimedia/jquery.i18n#jqueryi18n-plugin" target="_blank" rel="noopener noreferrer">the plugin&#x27;s features</a>.</p>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="migrating-from-orgjson-to-jackson">Migrating from org.json to Jackson<a href="#migrating-from-orgjson-to-jackson" class="hash-link" aria-label="Direct link to Migrating from org.json to Jackson" title="Direct link to Migrating from org.json to Jackson">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="why-are-we-doing-this-change-2">Why are we doing this change?<a href="#why-are-we-doing-this-change-2" class="hash-link" aria-label="Direct link to Why are we doing this change?" title="Direct link to Why are we doing this change?">​</a></h3>
<p>The org.json (or json-java) library has multiple drawbacks.</p>
<ul>
<li>First, it has limited functionality - all the serialization and deserialization has to be done explicitly - an important proportion of OpenRefine&#x27;s code was dedicated to implementing these;</li>
<li>Second, its implementation is not optimized for speed - multiple projects have reported speedups when migrating to more modern JSON libraries;</li>
<li>Third, and this was the decisive factor to initiate the migration: <a href="https://json.org/license" target="_blank" rel="noopener noreferrer">its license</a> is the MIT license with an additional condition which makes it non-free. Getting rid of this dependency was required by the Software Freedom Conservancy as a prerequisite to become a fiscal sponsor for the project.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="when-was-the-migration-made-1">When was the migration made?<a href="#when-was-the-migration-made-1" class="hash-link" aria-label="Direct link to When was the migration made?" title="Direct link to When was the migration made?">​</a></h3>
<p>This change was made between 3.1 and 3.2-beta, with this commit: <a href="https://github.com/OpenRefine/OpenRefine/commit/5639f1b2f17303b03026629d763dcb6fef98550b" target="_blank" rel="noopener noreferrer">https://github.com/OpenRefine/OpenRefine/commit/5639f1b2f17303b03026629d763dcb6fef98550b</a></p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="how-to-migrate-an-extension-or-fork">How to migrate an extension or fork<a href="#how-to-migrate-an-extension-or-fork" class="hash-link" aria-label="Direct link to How to migrate an extension or fork" title="Direct link to How to migrate an extension or fork">​</a></h3>
<p>You will need to use the Jackson library to serialize the classes that implement interfaces or extend classes exposed by OpenRefine.
The interface <code>Jsonizable</code> was deleted. Any class that used to implement this now needs to be serializable by Jackson, producing the same format as the previous serialization code. This applies to any operation, facet, overlay model or GREL function. If you are new to Jackson, have a look at <a href="https://www.baeldung.com/jackson" target="_blank" rel="noopener noreferrer">this tutorial</a> to learn how to annotate your class for serialization. Once this is done, you can remove the <code>void write(JSONWriter writer, Properties options)</code> method from your class. Note that it is important that you do this migration for all classes implementing the <code>Jsonizable</code> interface that are exposed to OpenRefine&#x27;s core.</p>
<p>We encourage you to migrate out of org.json completely, but this is only required for the classes that interact with OpenRefine&#x27;s core.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="general-notes-about-migrating">General notes about migrating<a href="#general-notes-about-migrating" class="hash-link" aria-label="Direct link to General notes about migrating" title="Direct link to General notes about migrating">​</a></h4>
<p>OpenRefine&#x27;s ObjectMapper is available at <code>ParsingUtilities.mapper</code>. It is configured to only serialize the fields and getters that have been explicitly marked with <code>@JsonProperty</code> (to avoid accidental JSON format changes due to refactoring). On deserialization it will ignore any field in the JSON payload that does not correspond to a field in the Java class. It has serializers and deserializers  for <code>OffsetDateTime</code> and <code>LocalDateTime</code>.</p>
<p>Useful snippets to use in tests:</p>
<ul>
<li>deserialize an instance: <code>MyClass instance = ParsingUtilities.mapper.readValue(jsonString, MyClass.class);</code> (replaces calls to <code>Jsonizable.write</code>);</li>
<li>serialize an instance: <code>String json = ParsingUtilities.mapper.writeValueAsString(myInstance);</code> (replaces calls to static methods such as <code>load</code>, <code>loadStreaming</code> or <code>reconstruct</code>);</li>
<li>the equivalent of <code>JSONObject</code> is <code>ObjectNode</code>, the equivalent of <code>JSONArray</code> is <code>ArrayNode</code>;</li>
<li>create an empty JSON object: <code>ParsingUtilities.mapper.createObjectNode()</code> (replaces <code>new JSONObject()</code>);</li>
<li>create an empty JSON array: <code>ParsingUtilities.mapper.createArrayNode()</code> (replaces <code>new JSONArray()</code>).</li>
</ul>
<p>Before undertaking the migration, we recommend that you write some tests which serialize and deserialize your objects. This will help you make sure that the JSON format is preserved during the migration. One way to do this is to collect some sample JSON representations of your objects, and check in your tests that deserializing these JSON payloads and serializing them back to JSON preserves the JSON payload. Some utilities are available to help you with that in <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/tests/server/src/com/google/refine/tests/util/TestUtils.java" target="_blank" rel="noopener noreferrer"><code>TestUtils</code></a> (we had <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/tests/server/src/com/google/refine/tests/util/TestUtils.java" target="_blank" rel="noopener noreferrer">some to test org.json serialization</a> before we got rid of the dependency, feel free to copy them).</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-functions">For functions<a href="#for-functions" class="hash-link" aria-label="Direct link to For functions" title="Direct link to For functions">​</a></h4>
<p>Before the migration, you had to explicitly define JSON serialization of functions with a <code>write</code> method. You should now override the getters returning the various documentation fields.</p>
<p>Example: <code>Cos</code> function <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/src/com/google/refine/expr/functions/math/Cos.java" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/expr/functions/math/Cos.java" target="_blank" rel="noopener noreferrer">after</a>.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-operations">For operations<a href="#for-operations" class="hash-link" aria-label="Direct link to For operations" title="Direct link to For operations">​</a></h4>
<p>Before the JSON migration we refactored engine-dependent operations so that the engine configuration is represented by an <code>EngineConfig</code> object instead of a <code>JSONObject</code>. Therefore the constructor for your operation should be updated to use this new class. Your constructor should also be annotated to be used during deserialization.</p>
<p>Note that you do not need to explicitly serialize the operation type, this is already done for you by <code>AbstractOperation</code>.</p>
<p>Example: <code>ColumnRemovalOperation</code> <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/src/com/google/refine/operations/column/ColumnRemovalOperation.java" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/operations/column/ColumnRemovalOperation.java" target="_blank" rel="noopener noreferrer">after</a>.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-changes">For changes<a href="#for-changes" class="hash-link" aria-label="Direct link to For changes" title="Direct link to For changes">​</a></h4>
<p>Changes are serialized in plain text but often relies on JSON serialization for parts of the data. Just use the methods above with <code>ParsingUtilities.mapper</code> to maintain this behaviour.</p>
<p>Example: <code>ReconChange</code> <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/src/com/google/refine/model/changes/ReconChange.java" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/operations/column/ColumnRemovalOperation.java" target="_blank" rel="noopener noreferrer">after</a>.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-importers">For importers<a href="#for-importers" class="hash-link" aria-label="Direct link to For importers" title="Direct link to For importers">​</a></h4>
<p>The importing options have been migrated from <code>JSONObject</code> to <code>ObjectNode</code>. Your compiler should help you propagate this change. Utility functions in <code>JSONUtilities</code> have been migrated to Jackson so you should have minimal changes if you used them.</p>
<p>Example: <code>TabularImportingParserBase</code> <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/src/com/google/refine/importers/TabularImportingParserBase.java" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/importers/TabularImportingParserBase.java" target="_blank" rel="noopener noreferrer">after</a>.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-overlay-models">For overlay models<a href="#for-overlay-models" class="hash-link" aria-label="Direct link to For overlay models" title="Direct link to For overlay models">​</a></h4>
<p>Migrate serialization and deserialization as for other objects.</p>
<p>Example: <code>WikibaseSchema</code> <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/extensions/wikidata/src/org/openrefine/wikidata/schema/WikibaseSchema.java#L203" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/extensions/wikidata/src/org/openrefine/wikidata/schema/WikibaseSchema.java#L60" target="_blank" rel="noopener noreferrer">after</a></p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="for-preference-values">For preference values<a href="#for-preference-values" class="hash-link" aria-label="Direct link to For preference values" title="Direct link to For preference values">​</a></h4>
<p>Any class that is stored in OpenRefine&#x27;s preference now needs to implement the <code>com.google.refine.preferences.PreferenceValue</code> interface. The static <code>load</code> method and the <code>write</code> method used previously for deserialization should be deleted and regular Jackson serialization and deserialization should be implemented instead. Note that you do not need to explicitly serialize the class name, this is already done for you by the interface.</p>
<p>Example: <code>TopList</code> <a href="https://github.com/OpenRefine/OpenRefine/blob/3.1/main/src/com/google/refine/preference/TopList.java" target="_blank" rel="noopener noreferrer">before</a> and <a href="https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/preference/TopList.java" target="_blank" rel="noopener noreferrer">after</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/OpenRefine/openrefine.github.com/edit/master/docs/technical-reference/migrating-older-extensions.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_AKM5" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_v_5u"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-01-12T09:55:01.000Z" itemprop="dateModified">Jan 12, 2024</time></b> by <b>Aakash Amod Rajput</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/technical-reference/writing-extensions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Writing extensions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/technical-reference/wikibase/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Wikibase extension</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_kigY thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#migrating-from-ant-to-maven" class="table-of-contents__link toc-highlight">Migrating from Ant to Maven</a><ul><li><a href="#why-are-we-doing-this-change" class="table-of-contents__link toc-highlight">Why are we doing this change?</a></li><li><a href="#when-was-this-change-made" class="table-of-contents__link toc-highlight">When was this change made?</a></li><li><a href="#how-to-migrate-an-extension" class="table-of-contents__link toc-highlight">How to migrate an extension</a></li></ul></li><li><a href="#migrating-to-wikimedias-i18n-jquery-plugin" class="table-of-contents__link toc-highlight">Migrating to Wikimedia&#39;s i18n jQuery plugin</a><ul><li><a href="#why-are-we-doing-this-change-1" class="table-of-contents__link toc-highlight">Why are we doing this change?</a></li><li><a href="#when-was-the-migration-made" class="table-of-contents__link toc-highlight">When was the migration made?</a></li><li><a href="#how-to-migrate-an-extension-1" class="table-of-contents__link toc-highlight">How to migrate an extension</a></li></ul></li><li><a href="#migrating-from-orgjson-to-jackson" class="table-of-contents__link toc-highlight">Migrating from org.json to Jackson</a><ul><li><a href="#why-are-we-doing-this-change-2" class="table-of-contents__link toc-highlight">Why are we doing this change?</a></li><li><a href="#when-was-the-migration-made-1" class="table-of-contents__link toc-highlight">When was the migration made?</a></li><li><a href="#how-to-migrate-an-extension-or-fork" class="table-of-contents__link toc-highlight">How to migrate an extension or fork</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get OpenRefine</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/whats_new">What&#x27;s new</a></li><li class="footer__item"><a class="footer__link-item" href="/extensions">Extensions</a></li><li class="footer__item"><a class="footer__link-item" href="/distributions">Other distributions</a></li><li class="footer__item"><a href="https://github.com/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">User manual</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/technical-reference/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/external_resources">External resources</a></li><li class="footer__item"><a class="footer__link-item" href="/funding">Grants &amp; funding</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy notice</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community">Get involved</a></li><li class="footer__item"><a href="https://forum.openrefine.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/openrefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                  <a rel="me" class="footer__link-item" target="_blank" href="https://fosstodon.org/@OpenRefine">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openrefine.org" rel="noopener noreferrer" class="footerLogoLink_rbIq"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="footer__logo themedComponent_vVmS themedComponent--light_NniB" height="150"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="footer__logo themedComponent_vVmS themedComponent--dark_yJur" height="150"></a></div><div class="footer__copyright"><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a><br>OpenRefine's documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div></div></div></footer></div>
</body>
</html>