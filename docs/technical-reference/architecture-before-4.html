<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-technical-reference/architecture-before-4" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Architecture before version 4 | OpenRefine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openrefine.org/docs/technical-reference/architecture-before-4"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture before version 4 | OpenRefine"><meta data-rh="true" name="description" content="OpenRefine is a web application, but is designed to be run locally on your own machine. The server-side maintains states of the data (undo/redo history, long-running processes, etc.) while the client-side maintains states of the user interface (facets and their selections, view pagination, etc.). The client-side makes GET and POST ajax calls to cause changes to the data and to fetch data and data-related states from the server-side."><meta data-rh="true" property="og:description" content="OpenRefine is a web application, but is designed to be run locally on your own machine. The server-side maintains states of the data (undo/redo history, long-running processes, etc.) while the client-side maintains states of the user interface (facets and their selections, view pagination, etc.). The client-side makes GET and POST ajax calls to cause changes to the data and to fetch data and data-related states from the server-side."><link data-rh="true" rel="icon" href="/img/openrefine_logo.svg"><link data-rh="true" rel="canonical" href="https://openrefine.org/docs/technical-reference/architecture-before-4"><link data-rh="true" rel="alternate" href="https://openrefine.org/docs/technical-reference/architecture-before-4" hreflang="en"><link data-rh="true" rel="alternate" href="https://openrefine.org/docs/technical-reference/architecture-before-4" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RXJKLJKJU2-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenRefine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenRefine Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="OpenRefine" href="/opensearch.xml">


<script src="/js/fix-location.js"></script><link rel="stylesheet" href="/assets/css/styles.a1181bf6.css">
<script src="/assets/js/runtime~main.3b2d2040.js" defer="defer"></script>
<script src="/assets/js/main.c6558953.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_hUDU" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="themedComponent_vVmS themedComponent--light_NniB"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="themedComponent_vVmS themedComponent--dark_yJur"></div><b class="navbar__title text--truncate">OpenRefine</b></a><a class="navbar__item navbar__link" href="/download">Download</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/donate">Donate</a><a href="https://github.com/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_CSJf colorModeToggle_Cgdy"><button class="clean-btn toggleButton_jrrp toggleButtonDisabled_v9ww" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_hPNs"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Pxog"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_WQyT"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_tDGm"><div class="docsWrapper_kJ9P"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_hEO2" type="button"></button><div class="docRoot_q0n7"><aside class="theme-doc-sidebar-container docSidebarContainer_HBrN"><div class="sidebarViewport_rCxN"><div class="sidebar_hGra"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Uy8J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs">User Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/technical-reference/contributing">Contributing to OpenRefine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/contributing">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/why-get-involved">Why get involved</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/github">Communicating via GitHub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/technical-reference/code-contributions">Contributing as a developer</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/code-contributions">Code contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/translating-ui">Translate OpenRefine&#x27;s interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/build-test-run">How to build, test and run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/functional-tests">Functional tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/technical-reference/architecture-before-4">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/technical-reference/architecture-before-4">Architecture before version 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/architecture-4">Architecture in version 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/clustering-in-depth">Clustering methods in-depth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/openrefine-api">OpenRefine API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/reconciliation-api">Reconciliation API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/writing-extensions">Extensions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/maintainer-guidelines">Maintaining OpenRefine</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/technical-reference/introduction">Contributing as a designer</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/documentation-contributions">Documentation contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical-reference/development-roadmap">Development roadmap</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_msDC"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VluO"><div class="docItemContainer_z4Sv"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_WV5T" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xTv0"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributing to OpenRefine</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contributing as a developer</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Architecture</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture before version 4</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_d09M theme-doc-toc-mobile tocMobile__k1e"><button type="button" class="clean-btn tocCollapsibleButton_cV_m">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture before version 4</h1></header><p>OpenRefine is a web application, but is designed to be run locally on your own machine. The server-side maintains states of the data (undo/redo history, long-running processes, etc.) while the client-side maintains states of the user interface (facets and their selections, view pagination, etc.). The client-side makes GET and POST ajax calls to cause changes to the data and to fetch data and data-related states from the server-side.</p>
<p>This architecture provides a good separation of concerns (data vs. UI); allows the use of familiar web technologies (HTML, CSS, Javascript) to implement user interface features; and enables the server side to be called by third-party software through standard GET and POST requests.</p>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="technology-stack">Technology stack<a href="#technology-stack" class="hash-link" aria-label="Direct link to Technology stack" title="Direct link to Technology stack">​</a></h2>
<p>The server-side (back-end) part of OpenRefine is implemented in Java as one single servlet which is executed by the <a href="http://jetty.codehaus.org/jetty/" target="_blank" rel="noopener noreferrer">Jetty</a> web server and servlet container. The use of Java strikes a balance between performance and portability across operating systems (there is very little OS-specific code and has mostly to do with starting the application).</p>
<p>The functional extensibility of OpenRefine is provided by a fork of the <a href="https://github.com/OpenRefine/simile-butterfly" target="_blank" rel="noopener noreferrer">SIMILE Butterfly</a> modular web application framework. With this framework, extensions are able to provide new functionality both in the
server- and client-side. A <a href="https://openrefine.org/extensions" target="_blank" rel="noopener noreferrer">list of known extensions</a> is maintained on our website and we have <a href="/docs/technical-reference/writing-extensions">specific documentation for extension developers</a>.</p>
<p>The client-side part of OpenRefine is implemented in HTML, CSS and plain Javascript. It primariy uses the following libraries:</p>
<ul>
<li><a href="http://jquery.com/" target="_blank" rel="noopener noreferrer">jQuery</a></li>
<li><a href="https://github.com/wikimedia/jquery.i18n" target="_blank" rel="noopener noreferrer">Wikimedia&#x27;s jQuery.i18n</a>
The front-end dependencies are fetched at build time via <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">NPM</a>.</li>
</ul>
<p>The server-side part of OpenRefine relies on many libraries, for instance to implement import and export in many different formats.
Those are fetched at build time via <a href="https://maven.apache.org/" target="_blank" rel="noopener noreferrer">Apache Maven</a>.</p>
<p>The data storage and processing architecture is being transformed. Up to version 3.x, OpenRefine uses an in-memory storage, where the entire project grid is loaded in the Java heap, with operations mutating that state. From 4.x on, OpenRefine uses a
different architecture, where data is stored on disk by default and cached in memory if the project is small enough.</p>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="server-side-architecture">Server-side architecture<a href="#server-side-architecture" class="hash-link" aria-label="Direct link to Server-side architecture" title="Direct link to Server-side architecture">​</a></h2>
<p>OpenRefine&#x27;s server-side is written entirely in Java (<code>main/src/</code>) and its entry point is the Java servlet <code>com.google.refine.RefineServlet</code>. By default, the servlet is hosted in the lightweight Jetty web server instantiated by <code>server/src/com.google.refine.Refine</code>. Note that the server class itself is under <code>server/src/</code>, not <code>main/src/</code>; this separation leaves the possibility of hosting <code>RefineServlet</code> in a different servlet container.</p>
<p>The web server configuration is in <code>main/webapp/WEB-INF/web.xml</code>; that&#x27;s where <code>RefineServlet</code> is hooked up. <code>RefineServlet</code> itself is simple: it just reacts to requests from the client-side by routing them to the right <code>Command</code> class in the packages <code>com.google.refine.commands.**</code>.</p>
<p>As mentioned before, the server-side maintains states of the data, and the primary class involved is <code>com.google.refine.ProjectManager</code>.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="projects">Projects<a href="#projects" class="hash-link" aria-label="Direct link to Projects" title="Direct link to Projects">​</a></h3>
<p>In OpenRefine there&#x27;s the concept of a workspace similar to that in <a href="https://www.eclipse.org/ide" target="_blank" rel="noopener noreferrer">Eclipse IDE</a>. When you run OpenRefine it manages projects within a single workspace, and the workspace is organized in a file directory with sub-directories. The default workspace directories are listed <a href="/docs/manual/installing#set-where-data-is-stored">in the manual</a> and it also explains how to change them.</p>
<p>The class <code>ProjectManager</code> is what manages the workspace. It keeps in memory the metadata of every project (in the class <code>ProjectMetadata</code>). This metadata includes the project&#x27;s name and last modified date, and any other information necessary to present and let the user interact with the project as a whole. Only when the user decides to look at the project&#x27;s data would <code>ProjectManager</code> load the project&#x27;s actual data. The separation of project metadata and data is to minimize the amount of stuff loaded into memory.</p>
<p>A project&#x27;s <em>actual</em> data includes the columns, rows, cells, reconciliation records, and history entries.</p>
<p>A project is loaded when it needs to be displayed or modified, and it remains in memory until 1 hour after the last time it gets modified. Periodically the project manager tries to save modified projects, and it saves as many modified projects as possible within 30 seconds.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="data-model">Data Model<a href="#data-model" class="hash-link" aria-label="Direct link to Data Model" title="Direct link to Data Model">​</a></h3>
<p>A project&#x27;s data consists of</p>
<ul>
<li><em>raw data</em>: a list of rows, each row consisting of a list of cells</li>
<li><em>models</em> on top of that raw data that give high-level presentation or interpretation of that data. This design lets the same raw data be viewed in different ways by different models, and let the models be changed without costly changes to the raw data.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="column-model">Column Model<a href="#column-model" class="hash-link" aria-label="Direct link to Column Model" title="Direct link to Column Model">​</a></h4>
<p>Cells in rows are not named and can only be addressed by their list position indices. So, a <em>column model</em> is needed to give a name to each list position. The column model also stores other metadata for each column, including the type that cells in the column have been reconciled to and the overall reconciliation statistics of those cells.</p>
<p>Each column also acts as a cache for data computed from the raw data related to that column.</p>
<p>Columns in the column model can be removed and re-ordered without changing the raw data--the cells in the rows. This makes column removal and ordering operations really quick.</p>
<h5 class="anchor anchorWithStickyNavbar__YFU" id="column-groups">Column Groups<a href="#column-groups" class="hash-link" aria-label="Direct link to Column Groups" title="Direct link to Column Groups">​</a></h5>
<div class="theme-admonition theme-admonition-caution admonition_yYQ_ alert alert--warning"><div class="admonitionHeading_IpSB"><span class="admonitionIcon_jG7y"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_svb2"><p>This feature is partially implemented, buggy and deprecated. It will be removed in OpenRefine 4.0.
See the following links for details:</p><ul>
<li><a href="https://github.com/OpenRefine/OpenRefine/issues/5122" target="_blank" rel="noopener noreferrer">Issue#5122</a> that first argues it&#x27;s a useful feature, but then agrees with its deprecation</li>
<li>Discussion <a href="https://groups.google.com/g/openrefine/c/A8RhOwlulRs/m/NFR8LDBmBwAJ" target="_blank" rel="noopener noreferrer">Who uses column groups?</a></li>
<li>Discussion <a href="https://groups.google.com/g/openrefine/c/X9O8NBC1UKQ" target="_blank" rel="noopener noreferrer">The future of the records mode</a> about better ways of implementing grouping and a hierarchical model in OpenRefine.</li>
</ul><p>This feature is related to <a href="/docs/manual/exploring#rows-vs-records">Rows vs Records</a>, which however continues to be supported.</p></div></div>
<p>Consider the following data:</p>
<p><img decoding="async" loading="lazy" src="https://raw.github.com/OpenRefine/OpenRefine/2.0/graphics/row-groups.png" alt="Illustration of row groups in OpenRefine" class="img_SA_L"></p>
<p>Although the data is in a grid, we humans can understand that it is a tree. First of all, all rows contain data ultimately linked to the movie Austin Powers, although only one row contains the text &quot;Austin Powers&quot; in the &quot;movie title&quot; column. We also know that &quot;USA&quot; and &quot;Germany&quot; are not related to Elizabeth Hurley and Mike Myers respectively (say, as their nationality), but rather, &quot;USA&quot; and &quot;Germany&quot; are related to the movie (where it was released). We know that Mike Myers played both the character &quot;Austin Powers&quot; and the character &quot;Dr. Evil&quot;; and for the latter he received 2 awards. We humans can understand how to interpret the grid as a tree based on its visual layout as well as some knowledge we have about the movie domain but is not encoded in the table.</p>
<p>OpenRefine can capture our knowledge of this transformation from grid to tree using <em>column groups</em>, also stored in the column model. Each column group illustrated as a blue bracket above specifies which columns are grouped together, as well as which of those columns is the key column in that group (blue triangle). One column group can span over columns grouped by another column group, and in this way, column groups form a hierarchy determined by which column group envelopes another. This hierarchy of column groups allows the 2-dimensional (grid-shaped) table of rows and cells to be interpreted as a list of hierarchical (tree-shaped) data records.</p>
<p>Blank cells play a very important role. The blank cell in a key column of a row (e.g., cell &quot;character&quot; on row 4) makes that row (row 4) <em>depend</em> on the first preceding row with that column filled in (row 3). This means that &quot;Best Comedy Perf&quot; on row 4 applies to &quot;Dr. Evil&quot; on row 3. Row 3 is said to be a <em>context row</em> for row 4. Similarly, since rows 2 - 6 all have blank cells in the first column, they all depend on row 1, and all their data ultimately applies to the movie Austin Powers. Row 1 depends on no other row and is said to be a <em>record row</em>. Rows 1 - 6 together form one <em>record</em>.</p>
<p>Currently (as of 12th December 2017) only the XML and JSON importers create column groups, and while the data table view does display column groups but it doesn&#x27;t support modifying them.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="changes-history-processes-and-operations">Changes, History, Processes, and Operations<a href="#changes-history-processes-and-operations" class="hash-link" aria-label="Direct link to Changes, History, Processes, and Operations" title="Direct link to Changes, History, Processes, and Operations">​</a></h3>
<p>All changes to the project&#x27;s data are tracked (N.B. this does not include changes to a project&#x27;s metadata - such as the project name.)</p>
<p>Changes are stored as <code>com.google.refine.history.Change</code> objects. <code>com.google.refine.history.Change</code> is an interface, and implementing classes are in <code>com.google.refine.model.changes.**</code>. Each change object stores enough data to modify the project&#x27;s data when its <code>apply()</code> method is called, and enough data to revert its effect when its <code>revert()</code> method is called. It&#x27;s only supposed to <em>store</em> data, not to actually <em>compute</em> the change. In this way, it&#x27;s like a .diff patch file for a code base.</p>
<p>Some change objects can be huge, as huge as the project itself. So change objects are not kept in memory except when they are to be applied or reverted. However, since we still need to show the user some information about changes (as displayed in the History panel in the UI), we keep metadata of changes separate from the change objects. For each change object there is one corresponding <code>com.google.refine.history.HistoryEntry</code> for storing its metadata, such as the change&#x27;s human-friendly description and timestamp.</p>
<p>Each project has a <code>com.google.refine.history.History</code> object that contains an ordered list of all <code>HistoryEntry</code> objects storing metadata for all changes that have been done since after the project was created. Actually, there are 2 ordered lists: one for done changes that can be reverted (undone), an done for undone changes that can be re-applied (redone). Changes must be done or redone in their exact orders in these lists because each change makes certain assumptions about the state of the project before and after it is applied. As changes cannot be undone/redone out of order, when one change fails to revert, it blocks the whole history from being reverted to any state preceding that change (as happened in <a href="https://github.com/OpenRefine/OpenRefine/issues/2" target="_blank" rel="noopener noreferrer">Issue #2</a>).</p>
<p>As mentioned before, a change contains only the diff and does not actually compute that diff. The computation is performed by a <code>com.google.refine.process.Process</code> object--every change object is created by a process object. A process can be immediate, producing its change object synchronously within a very short period of time (e.g., starring one row); or a process can be long-running, producing its change object after a long time and a lot of computation, including network calls (e.g., reconciling a column).</p>
<p>As the user interacts with the UI on the client-side, their interactions trigger ajax calls to the server-side. Some calls are meant to modify the project. Those are handled by commands that instantiates processes. Processes are queued in a first-in-first-out basis. The first-in process gets run and until it is done all the other processes are stuck in the queue.</p>
<p>A process can effect a change in one thing in the project (e.g., edit one particular cell, star one particular row), or a process can effect changes in <em>potentially</em> many things in the project (e.g., edit zero or more cells sharing the same content, starring all rows filtered by some facets). The latter kind of process is generalizable: it is meaningful to apply them on another similar project. Such a process is associated with an <em>abstract operation</em> <code>com.google.refine.model.AbstractOperation</code> that encodes the information necessary to create another instance of that process, but potentially for a different project. When you click &quot;extract&quot; in the History panel, these abstract operations are called to serialize their information to JSON; and when you click &quot;apply&quot; in the History panel, the JSON you paste in is used to re-construct these abstract operations, which in turn create processes, which get run sequentially in a queue to generate change object and history entry pairs.</p>
<p>In summary,</p>
<ul>
<li>change objects store diffs</li>
<li>history entries store metadata of change objects</li>
<li>processes compute diffs and create change object and history entry pairs</li>
<li>some processes are long-running and some are immediate; processes are run sequentially in a queue</li>
<li>generalizable processes can be re-constructed from abstract operations</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="client-side-architecture">Client-side architecture<a href="#client-side-architecture" class="hash-link" aria-label="Direct link to Client-side architecture" title="Direct link to Client-side architecture">​</a></h2>
<p>The client-side part of OpenRefine is implemented in HTML, CSS and Javascript and uses the following Javascript libraries:</p>
<ul>
<li><a href="http://jquery.com/" target="_blank" rel="noopener noreferrer">jQuery</a></li>
<li><a href="http:jqueryui.com/" target="_blank" rel="noopener noreferrer">jQueryUI</a></li>
<li><a href="https://github.com/recurser/jquery-i18n" target="_blank" rel="noopener noreferrer">Recurser jquery-i18n</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="importing-architecture">Importing architecture<a href="#importing-architecture" class="hash-link" aria-label="Direct link to Importing architecture" title="Direct link to Importing architecture">​</a></h3>
<p>OpenRefine has a sophisticated architecture for accommodating a diverse and extensible set of importable file formats and workflows. The formats range from simple CSV, TSV to fixed-width fields to line-based records to hierarchical XML and JSON. The workflows allow the user to preview and tweak many different import settings before creating the project. In some cases, such as XML and JSON, the user also has to select which elements in the data file to import. Additionally, a data file can also be an archive file (e.g., .zip) that contains many files inside; the user can select which of those files to import. Finally, extensions to OpenRefine can inject functionalities into any part of this architecture.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="the-index-page-and-action-areas">The Index Page and Action Areas<a href="#the-index-page-and-action-areas" class="hash-link" aria-label="Direct link to The Index Page and Action Areas" title="Direct link to The Index Page and Action Areas">​</a></h3>
<p>The opening screen of OpenRefine is implemented by the file <code>main/webapp/modules/core/index.vt</code> and will be referred to here as the index page. Its default implementation contains 3 finger tabs labeled Create Project, Open Project, and Import Project. Each tab selects an &quot;action area&quot;. The 3 default action areas are for, obviously, creating a new project, opening an existing project, and importing a project .tar file.</p>
<p>Extensions can add more action areas in Javascript. For example, this is how the Create Project action area is added (<code>main/webapp/modules/core/scripts/index/create-project-ui.js</code>):</p>
<div class="language-javascript codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-javascript codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">actionAreas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;create-project&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">label</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Create Project&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">uiClass</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">CreateProjectUI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The UI class is a constructor function that takes one argument, a jQuery-wrapped HTML element where the tab body of the action area should be rendered.</p>
<p>If your extension requires a very unique importing work flow, or a very novel feature that should be exposed on the index page, then add a new action area. Otherwise, try to use the existing work flows as much as possible.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="the-create-project-action-area">The Create Project Action Area<a href="#the-create-project-action-area" class="hash-link" aria-label="Direct link to The Create Project Action Area" title="Direct link to The Create Project Action Area">​</a></h3>
<p>The Create Project action area is itself extensible. Initially, it embeds a set of finger tabs corresponding to a variety of &quot;source selection UIs&quot;: you can select a source of data by specifying a file on your computer, or you can specify the URL to a publicly accessible data file or data feed, or you can paste in from the clipboard a chunk of data.</p>
<p>There are actually 3 points of extension in the Create Project action area, and the first is invisible.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="importing-controllers">Importing Controllers<a href="#importing-controllers" class="hash-link" aria-label="Direct link to Importing Controllers" title="Direct link to Importing Controllers">​</a></h4>
<p>The Create Project action area manages a list of &quot;importing controllers&quot;. Each controller follows a particular work flow (in UI terms, think &quot;wizard&quot;). Refine comes with a &quot;default importing controller&quot; (refine/main/webapp/modules/core/scripts/index/default-importing-controller/controller.js) and its work flow assumes that the data can be retrieved and cached in whole before getting processed in order to generate a preview for the user to inspect. (If the data cannot be retrieved and cached in whole before previewing, then another importing controller is needed.)</p>
<p>An importing controller is just programming logic, but it can manifest itself visually by registering one or more data source UIs and one or more custom panels in the Create Project action area. The default importing controller registers 3 such custom panels, which act like pages of a wizard.</p>
<p>An extension can register any number of importing controller. Each controller has a client-side part and a server-side part. Its client-side part is just a constructor function that takes an object representing the Create Project action area (usually named <code>createProjectUI</code>). The controller (client-side) is expected to use that object to register data source UIs and/or create custom panels. The controller is not expected to have any particular interface method. The default importing controller&#x27;s client-side code looks like this (<code>main/webapp/modules/core/scripts/index/default-importing-controller/controller.js</code>):</p>
<div class="language-javascript codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-javascript codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access maybe-class-name" style="color:rgb(130, 170, 255)">DefaultImportingController</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">createProjectUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_createProjectUI</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> createProjectUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// save a reference to the create project action area</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_progressPanel</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> createProjectUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addCustomPanel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// create a custom panel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_progressPanel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;...&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// render the custom panel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> other stuff </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">CreateProjectUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">controllers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">DefaultImportingController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// register the controller</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We will cover the server-side code <a href="#importingcontrollers">below</a>.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="data-source-selection-uis">Data Source Selection UIs<a href="#data-source-selection-uis" class="hash-link" aria-label="Direct link to Data Source Selection UIs" title="Direct link to Data Source Selection UIs">​</a></h4>
<p>Data source selection UIs are another point of extensibility in the Create Project action area. As mentioned previously, by default there are 3 data source UIs. Those are added by the default importing controller.</p>
<p>Extensions can also add their own data source UIs. A data source selection UI object can be registered like so</p>
<div class="language-javascript codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-javascript codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token plain">createProjectUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addSourceSelectionUI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">label</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;This Computer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;local-computer-source&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">ui</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> theDataSourceSelectionUIObject</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>theDataSourceSelectionUIObject</code> is an object that has the following member methods:</p>
<ul>
<li><code>attachUI(bodyDiv)</code></li>
<li><code>focus()</code></li>
</ul>
<p>If you want to install a data source selection UI that is managed by the default importing controller, then register its UI class with the default importing controller, like so (<code>main/webapp/modules/core/scripts/index/default-importing-sources/sources.js</code>):</p>
<div class="language-javascript codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-javascript codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token maybe-class-name">Refine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">DefaultImportingController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string-property property">&quot;label&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;This Computer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string-property property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;upload&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string-property property">&quot;uiClass&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">ThisComputerImportingSourceUI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default importing controller will assume that the <code>uiClass</code> field is a constructor function and call it with one argument--the controller object itself. That constructor function should save the controller object for later use. More specifically, for data source UIs that use the default importing controller, they can call the controller to kickstart the process that retrieves and caches the data to import:</p>
<div class="language-javascript codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-javascript codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token plain">controller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">startImportJob</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">form</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;... status message ...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The argument <code>form</code> is a jQuery-wrapped FORM element that will get submitted to the server side at the command <code>/command/core/create-importing-job</code>. That command and the default importing controller will take care of uploading or downloading the data, caching it, updating the client side&#x27;s progress display, and then showing the next importing step when the data is fully cached.</p>
<p>See <code>main/webapp/modules/core/scripts/index/default-importing-sources/sources.js</code> for examples of such source selection UIs. While we write about source selection UIs managed by the default importing controller here, chances are your own extension will not be adding such a new source selection UI. Your extension probably adds with a new importing controller as well as a new source selection UI that work together.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="file-selection-panel">File Selection Panel<a href="#file-selection-panel" class="hash-link" aria-label="Direct link to File Selection Panel" title="Direct link to File Selection Panel">​</a></h4>
<p>This screen is shown when there are multiple files to choose from when creating a project, for instance after uploading a zip file with multiple files in it. This interface lets the user choose which files to import to create a new project.
Although OpenRefine only supports one table per project so far, it is possible to select multiple files to import. Their contents will be concatenated into a single table.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="parsing-ui-panel">Parsing UI Panel<a href="#parsing-ui-panel" class="hash-link" aria-label="Direct link to Parsing UI Panel" title="Direct link to Parsing UI Panel">​</a></h4>
<p>The parsing UI panel is shown when importing data into a new project.
Primarily, it lets the user select in which format the data is, which determines how it is read and transformed into an OpenRefine project. The back-end will try to supply an informed guess for the format using the <a href="#formatguesser">format guesser</a>, but it
is not uncommon that this initial choice must be overriden by the user.</p>
<p>Beyond this choice of format, the parsing UI panel offers a configuration panel for the chosen importer. This part of the UI can be defined independently for each input format, given that not all options are relevant for all formats. For instance, when
selecting the &quot;Text file&quot; option, the specific UI of the <code>LinedBasedImporter</code> will be shown. This UI is defined in:</p>
<ul>
<li><code>main/webapp/modules/core/scripts/index/parser-interfaces/line-based-parser-ui.html</code></li>
<li><code>main/webapp/modules/core/scripts/index/parser-interfaces/line-based-parser-ui.js</code></li>
</ul>
<p>Other importers generally define their own parsing configuration panel as well.</p>
<p>The link between the format&#x27;s identifier (MIME type), importer (Java class which defines the parsing logic) and parsing options UI (Javascript class that defines the rendering of this options area) is made in the <code>main/webapp/modules/core/MOD-INF/controller.js</code> file,
where those components are registered together in the <code>ImportingManager</code>.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="server-side-components">Server-side Components<a href="#server-side-components" class="hash-link" aria-label="Direct link to Server-side Components" title="Direct link to Server-side Components">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="importingcontroller">ImportingController<a href="#importingcontroller" class="hash-link" aria-label="Direct link to ImportingController" title="Direct link to ImportingController">​</a></h4>
<p>An importing controller is a component of the back-end which is in charge of the entire importing workflow, from the initial transfer of the raw data to be imported to the created project, with all the configuration steps in between, <a href="#importing-controllers">as described in the
earlier section</a>. OpenRefine comes with
a default importing controller which implements this for data coming from:</p>
<ul>
<li>file upload by the user via the web interface</li>
<li>upload of textual information using the clipboard import form</li>
<li>download of a file by supplying a URL</li>
</ul>
<p>For all of these data sources, the first step consists of storing the corresponding input files in a temporary directory inside the workspace. The default importing controller provides an HTTP API used by the front-end to select which files to import, <a href="#formatguesser">predict
the format they are in</a>, provide default importing options for the selected format, preview the project&#x27;s first few rows with the given options, and finally create the project.</p>
<p>The importing controller is not used for loading existing projects or importing OpenRefine project archives: the project manager is responsible for both of those.</p>
<p>Extensions can define other importing controllers to implement other importing flows depending on the data source. For instance, importing data from a SQL database requires different steps such as selecting the database and providing a SQL query. The
<code>database</code> extension implements such a workflow by providing its own importing controller.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="formatguesser">FormatGuesser<a href="#formatguesser" class="hash-link" aria-label="Direct link to FormatGuesser" title="Direct link to FormatGuesser">​</a></h4>
<p>A format guesser is a class that tries to determine the MIME type of a file, considering its contents.
The <code>FormatGuesser</code> interface has multiple implementations, which can be used to determine the format depending on its basic type (binary, text based).
For text files, this relies on heuristics which are quite ad-hoc and brittle. For binary files, we do not currently try to do anything, while one would at least expect that we check for some so-called magic numbers at the beginning of files, which can be
used to detect many file formats.</p>
<p>Worse, our format guessing logic does not actually attempt to parse the files with the guessed formats, so it is not uncommon that the user is directly presented with a parsing error (in the form of a javascript alert) upon importing files.</p>
<p>This could be avoided by trying to read the given files with the predicted importer before suggesting the format to the user, making sure that at least that does not throw an exception.</p>
<h4 class="anchor anchorWithStickyNavbar__YFU" id="importingparser">ImportingParser<a href="#importingparser" class="hash-link" aria-label="Direct link to ImportingParser" title="Direct link to ImportingParser">​</a></h4>
<p>An <code>ImportingParser</code> is a class that is responsible for parsing a file into OpenRefine&#x27;s project model.
It takes a range of importing options passed on from the frontend, input by the user into a dedicated UI, specific to the format being parsed.</p>
<p>When possible, parsers are designed so that they can import the first few rows of the project without reading the entire input file in memory. This helps provide fast previews of the project to be created when the user changes importing options. Every
change in the importing options triggers a new parse of the source files (unless the user has disabled auto preview option in the parsing configuration panel).</p>
<h2 class="anchor anchorWithStickyNavbar__YFU" id="faceted-browsing-architecture">Faceted browsing architecture<a href="#faceted-browsing-architecture" class="hash-link" aria-label="Direct link to Faceted browsing architecture" title="Direct link to Faceted browsing architecture">​</a></h2>
<p>Faceted browsing support is core to OpenRefine as it is the primary and only mechanism for filtering to a subset of rows on which to do something <em>en masse</em> (ie in bulk). Without faceted browsing or an equivalent querying/browsing mechanism, you can only change one thing at a time (one cell or row) or else change everything all at once; both kinds of editing are practically useless when dealing with large data sets.</p>
<p>In OpenRefine, different components of the code need to know which rows to process from the faceted browsing state (how the facets are constrained). For example, when the user applies some facet selections and then exports the data, the exporter serializes only the matching rows, not all rows in the project. Thus, faceted browsing isn&#x27;t only hooked up to the data view for displaying data to the user, but it is also hooked up to almost all other parts of the system.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="engine-configuration">Engine Configuration<a href="#engine-configuration" class="hash-link" aria-label="Direct link to Engine Configuration" title="Direct link to Engine Configuration">​</a></h3>
<p>As OpenRefine is a web app, there might be several browser windows opened on the same project, each in a different faceted browsing state. It is best to maintain the faceted browsing state in each browser window while keeping the server side completely stateless with regard to faceted browsing. Whenever the client-side needs something done by the server, it transfers the entire faceted browsing state over to the server-side. The faceted browsing state behaves much like the <code>WHERE</code> clause in a SQL query, telling the server-side how to select the rows to process.</p>
<p>In fact, it is best to think of the faceted browsing state as just a database query much like a SQL query. It can be passed around the whole system, to any component needing to know which rows to process. It is serialized into JSON to pass between the client-side and the server side, or to save in an abstract operation&#x27;s specification. The job of the faceted browsing subsystem on the client-side is to let the user interactively modify this &quot;faceted browsing query&quot;, and the job of the faceted browsing subsystem on the server side is to resolve that query.</p>
<p>In the code, the faceted browsing state, or faceted browsing query, is actually called the <em>engine configuration</em> or <em>engine config</em> for short. It consists mostly of an array facet configurations. For each facet, it stores the name of the column on which the facet is based (or an empty string if there is no base column). Each type of facet has different configuration. Text search facets have queries and flags for case-sensitivity mode and regular expression mode. Text facets (aka list facets) and numeric range facets have expressions. Each list facet also has an array of selected choices, an invert flag, and flags for whether blank and error cells are selected. Each numeric range facet has, among other things, a &quot;from&quot; and a &quot;to&quot; values. If you trace the AJAX calls, you&#x27;d see the engine configs being shuttled, e.g.,</p>
<div class="language-json codeBlockContainer_WtFl theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_pLfi"><pre tabindex="0" class="prism-code language-json codeBlock__6v4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Ofhx"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;mode&quot;: &quot;rows&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;facets&quot; : [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Shrt_Desc&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;columnName&quot;: &quot;Shrt_Desc&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;mode&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;caseSensitive&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;query&quot;: &quot;cheese&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;list&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Shrt_Desc&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;columnName&quot;: &quot;Shrt_Desc&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;expression&quot;: &quot;grel:value.toLowercase().split(\&quot;,\&quot;)&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;omitBlank&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;omitError&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selection&quot;: [],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectBlank&quot;:false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectError&quot;:false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;invert&quot;:false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;range&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Water&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;expression&quot;: &quot;value&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;columnName&quot;: &quot;Water&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectNumeric&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectNonNumeric&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectBlank&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;selectError&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;from&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;to&quot;: 53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_TdkF"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_x2pO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M8dX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Dndh"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="server-side-subsystem">Server-Side Subsystem<a href="#server-side-subsystem" class="hash-link" aria-label="Direct link to Server-Side Subsystem" title="Direct link to Server-Side Subsystem">​</a></h3>
<p>From an engine configuration like the one above, the server-side faceted browsing subsystem is capable of producing:</p>
<ul>
<li>an iteration over the rows matching the facets&#x27; constraints</li>
<li>information on how to render the facets (e.g., choice and count pairs for a list facet, histogram for a numeric range facet)</li>
</ul>
<p>When the engine config JSON arrives in an HTTP request on the server-side, a <code>com.google.refine.browsing.Engine</code> object is constructed and initialized with that JSON. It in turns constructs zero or more <code>com.google.refine.browsing.facets.Facet</code> objects. Then for each facet, the engine calls its <code>getRowFilter()</code> method, which returns <code>null</code> if the facet isn&#x27;t constrained in anyway, or a <code>com.google.refine.browsing.filters.RowFilter</code> object. Then, to when iterating over a project&#x27;s rows, the engine calls on all row filters&#x27; <code>filterRow()</code> method. If and only if all row filters return <code>true</code> the row is considered to match the facets&#x27; constraints. How each row filter works depends on the corresponding type of facet.</p>
<p>To produce information on how to render a particular facet in the UI, the engine follows the same procedure described in the previous except it skips over the facet in question. In other words, it produces an iteration over all rows constrained by the other facets. Then it feeds that iteration to the facet in question by calling the facet&#x27;s <code>computeChoices()</code> method. This gives the method a chance to compute the rendering information for its UI counterpart on the client-side. When all facets have been given a chance to compute their rendering information, the engine calls all facets to serialize their information as JSON and returns the JSON to the client-side. Only one HTTP call is needed to compute all facets.</p>
<h3 class="anchor anchorWithStickyNavbar__YFU" id="client-side-subsystem">Client-side subsystem<a href="#client-side-subsystem" class="hash-link" aria-label="Direct link to Client-side subsystem" title="Direct link to Client-side subsystem">​</a></h3>
<p>On the client-side there is also an engine object (implemented in Javascript rather than Java) and zero or more facet objects (also in Javascript, obviously). The engine is responsible for distributing the rendering information computed on the server-side to the right facets, and when the user interacts with a facet, the facet tells the engine to update the whole UI. To do so, the engine gathers the configuration of each facet and composes the whole engine config as a single JSON object. Two separate AJAX calls are made with that engine config, one to retrieve the rows to render, and one to re-compute the rendering information for the facets because changing one facet does affect all the other facets.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/OpenRefine/openrefine.github.com/edit/master/docs/technical-reference/architecture-before-4.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_AKM5" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_v_5u"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-27T14:48:08.000Z" itemprop="dateModified">Feb 27, 2023</time></b> by <b>Antonin Delpeuch</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/technical-reference/functional-tests"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Functional tests</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/technical-reference/architecture-4"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture in version 4</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_kigY thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#technology-stack" class="table-of-contents__link toc-highlight">Technology stack</a></li><li><a href="#server-side-architecture" class="table-of-contents__link toc-highlight">Server-side architecture</a><ul><li><a href="#projects" class="table-of-contents__link toc-highlight">Projects</a></li><li><a href="#data-model" class="table-of-contents__link toc-highlight">Data Model</a></li><li><a href="#changes-history-processes-and-operations" class="table-of-contents__link toc-highlight">Changes, History, Processes, and Operations</a></li></ul></li><li><a href="#client-side-architecture" class="table-of-contents__link toc-highlight">Client-side architecture</a><ul><li><a href="#importing-architecture" class="table-of-contents__link toc-highlight">Importing architecture</a></li><li><a href="#the-index-page-and-action-areas" class="table-of-contents__link toc-highlight">The Index Page and Action Areas</a></li><li><a href="#the-create-project-action-area" class="table-of-contents__link toc-highlight">The Create Project Action Area</a></li><li><a href="#server-side-components" class="table-of-contents__link toc-highlight">Server-side Components</a></li></ul></li><li><a href="#faceted-browsing-architecture" class="table-of-contents__link toc-highlight">Faceted browsing architecture</a><ul><li><a href="#engine-configuration" class="table-of-contents__link toc-highlight">Engine Configuration</a></li><li><a href="#server-side-subsystem" class="table-of-contents__link toc-highlight">Server-Side Subsystem</a></li><li><a href="#client-side-subsystem" class="table-of-contents__link toc-highlight">Client-side subsystem</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get OpenRefine</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/whats_new">What&#x27;s new</a></li><li class="footer__item"><a class="footer__link-item" href="/extensions">Extensions</a></li><li class="footer__item"><a class="footer__link-item" href="/distributions">Other distributions</a></li><li class="footer__item"><a href="https://github.com/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">User manual</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/technical-reference/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/external_resources">External resources</a></li><li class="footer__item"><a class="footer__link-item" href="/funding">Grants &amp; funding</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy notice</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community">Get involved</a></li><li class="footer__item"><a href="https://forum.openrefine.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/openrefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_RpKI"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                  <a rel="me" class="footer__link-item" target="_blank" href="https://fosstodon.org/@OpenRefine">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openrefine.org" rel="noopener noreferrer" class="footerLogoLink_rbIq"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="footer__logo themedComponent_vVmS themedComponent--light_NniB" height="150"><img src="/img/openrefine_logo.svg" alt="OpenRefine diamond logo" class="footer__logo themedComponent_vVmS themedComponent--dark_yJur" height="150"></a></div><div class="footer__copyright"><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a><br>OpenRefine's documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div></div></div></footer></div>
</body>
</html>