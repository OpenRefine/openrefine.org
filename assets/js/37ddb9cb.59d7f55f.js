"use strict";(self.webpackChunkOpenRefine_Documentation=self.webpackChunkOpenRefine_Documentation||[]).push([[224],{28839:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var t=i(64861),o=i(69018);const r={id:"jythonclojure",title:"Jython & Clojure",sidebar_label:"Jython & Clojure"},l=void 0,s={id:"manual/jythonclojure",title:"Jython & Clojure",description:"Jython",source:"@site/docs/manual/jythonclojure.md",sourceDirName:"manual",slug:"/manual/jythonclojure",permalink:"/docs/manual/jythonclojure",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenRefine/openrefine.github.com/edit/master/docs/manual/jythonclojure.md",tags:[],version:"current",lastUpdatedBy:"Antonin Delpeuch",lastUpdatedAt:1669278148e3,frontMatter:{id:"jythonclojure",title:"Jython & Clojure",sidebar_label:"Jython & Clojure"},sidebar:"docs",previous:{title:"GREL functions",permalink:"/docs/manual/grelfunctions"},next:{title:"Exporting",permalink:"/docs/manual/exporting"}},a={},c=[{value:"Jython",id:"jython",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Tutorials",id:"tutorials",level:3},{value:"Clojure",id:"clojure",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"jython",children:"Jython"}),"\n",(0,t.jsxs)(n.p,{children:["Jython 2.7.2 comes bundled with the default installation of OpenRefine 3.4.1. You can add libraries and code by following ",(0,t.jsx)(n.a,{href:"https://github.com/OpenRefine/OpenRefine/wiki/Extending-Jython-with-pypi-modules",children:"this tutorial"}),". A large number of Python files (",(0,t.jsx)(n.code,{children:".py"})," or ",(0,t.jsx)(n.code,{children:".pyc"}),") are compatible."]}),"\n",(0,t.jsx)(n.p,{children:"Python code that depends on C bindings will not work in OpenRefine, which uses Java / Jython only. Since Jython is essentially Java, you can also import Java libraries and utilize those."}),"\n",(0,t.jsx)(n.p,{children:"You will need to restart OpenRefine, so that new Jython or Python libraries are initialized during startup."}),"\n",(0,t.jsxs)(n.p,{children:["OpenRefine now has ",(0,t.jsx)(n.a,{href:"grelfunctions#jsoup-xml-and-html-parsing-functions",children:"most of the Jsoup.org library built into GREL functions"})," for parsing and working with HTML and XML elements."]}),"\n",(0,t.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsxs)(n.p,{children:["Expressions in Jython must have a ",(0,t.jsx)(n.code,{children:"return"})," statement:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  return value[1:-1]\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  return rowIndex%2\n"})}),"\n",(0,t.jsx)(n.p,{children:"Fields have to be accessed using the bracket operator rather than dot notation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'  return cells["col1"]["value"]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For example, to access the ",(0,t.jsx)(n.a,{href:"reconciling#reconciliation-facets",children:"edit distance"})," between a reconciled value and an original cell value using ",(0,t.jsx)(n.a,{href:"#reconciliation",children:"recon variables"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'  return cell["recon"]["features"]["nameLevenshtein"]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["To return the lower case of ",(0,t.jsx)(n.code,{children:"value"})," (if the value is not null):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  if value is not None:\n    return value.lower()\n  else:\n    return None\n"})}),"\n",(0,t.jsx)(n.h3,{id:"tutorials",children:"Tutorials"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/OpenRefine/OpenRefine/wiki/Extending-Jython-with-pypi-modules",children:"Extending Jython with pypi modules"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/OpenRefine/OpenRefine/wiki/Jython#tutorial---working-with-phone-numbers-using-java-libraries-inside-python",children:"Working with phone numbers using Java libraries inside Python"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Full documentation on the Jython language can be found on its official site: ",(0,t.jsx)(n.a,{href:"http://www.jython.org",children:"http://www.jython.org"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"clojure",children:"Clojure"}),"\n",(0,t.jsxs)(n.p,{children:["Clojure 1.10.1 comes bundled with the default installation of OpenRefine 3.4.1. At this time, not all ",(0,t.jsx)(n.a,{href:"expressions#variables",children:"variables"})," can be used with Clojure expressions: only ",(0,t.jsx)(n.code,{children:"value"}),", ",(0,t.jsx)(n.code,{children:"row"}),", ",(0,t.jsx)(n.code,{children:"rowIndex"}),", ",(0,t.jsx)(n.code,{children:"cell"}),", and ",(0,t.jsx)(n.code,{children:"cells"})," are available."]}),"\n",(0,t.jsx)(n.p,{children:"For example, functions can take the form"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"(.. value (toUpperCase) )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or can look like"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'(-> value (str/split #" ") last )\n'})}),"\n",(0,t.jsxs)(n.p,{children:["which functions like ",(0,t.jsx)(n.code,{children:'value.split(" ")'})," in GREL."]}),"\n",(0,t.jsxs)(n.p,{children:["For help with syntax, see the ",(0,t.jsx)(n.a,{href:"https://clojure.org/guides/learn/syntax",children:"Clojure website's guide to syntax"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["User-contributed Clojure recipes can be found on our wiki at ",(0,t.jsx)(n.a,{href:"https://github.com/OpenRefine/OpenRefine/wiki/Recipes#11-clojure",children:"https://github.com/OpenRefine/OpenRefine/wiki/Recipes#11-clojure"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Full documentation on the Clojure language can be found on its official site: ",(0,t.jsx)(n.a,{href:"https://clojure.org/",children:"https://clojure.org/"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},69018:(e,n,i)=>{i.d(n,{Z:()=>s,a:()=>l});var t=i(47768);const o={},r=t.createContext(o);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);